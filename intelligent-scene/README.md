# Intelligent Scene

Intelligent Scene is a console application to create a scene for a single zone in a Philips Hue light setup using artificial intelligence.

It is powered by the Microsoft Semantic Kernel and uses Open AI to create the scene based on:
* The location of the zone, e.g. Ground Floor,
* The number of lights the zone contains, e.g. 4,
* A situation such an event or environment for the scene, e.g. Woodland on a Sunny Day, a Birthday Party, etc..

**Currently, only a single zone and setting all its lights is supported .**

Additional Credits:

* [Q42.HueApi by Michiel Post](https://github.com/michielpost/Q42.HueApi)

## Setting Up

**You need to have a zone configured in your Philips Hue installation.**

* Build the .NET application in the _IntelligentScene_ project directory.
* Optionally publish the .NET application as a single-file executable, e.g. for macOS:

```sh
dotnet build
dotnet publish -r osx-arm64 -p:PublishSingleFile=true --self-contained true
```

## Configuration

All values used by the application are set in the `appsettings.json` file which is included in the _IntelligentScene_ directory and copied to the output build or publish directory.  An example is shown below with in-line comments to explain each value.

```json
{
    "PhilipsHue": {
        /* The IP address of the Hue Bridge. */
        "BridgeIpAddress": "192.168.1.150",
        /* The Hue Bridge app username. */
        "AppUsername": "ABCDEFGHIJKLMNOPQRSTUVWXYZABC-abcdefghij",
        /* The zone to set the scene. */
        "Zone": "Ground Floor"
    },
    "OpenAi": {
        /* The Open AI API key. */
        "ApiKey": "sk-ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuv",
        /* The Open AI model to use. */
        "Model": "gpt-3.5-turbo"
    }
}
```

## Starting the Program

As all configuration is stored in `appsettings.json` no command-line arguments are required, therefore, simply run:

```sh
# .NET CLI
dotnet run

# Single-File Executable
./intelscn
```

While running the program will log status messages to the console and pause for user input when required.

## Providing a Situation to Create a Scene

The situation will be the main factor used by the AI to create a scene around, indicated by the `Situation` prompt in the console output as shown below.

```
    # Previous output removed for brevity.
info: Program[0] 1 plugins loaded:
info: Program[0] - IntelligentScene
info: Program[0] Starting user interaction prompt...
*** Intelligent Scene ***
* Scene Setup *
Location: Ground Floor
Lights: 8
Situation:
```

This can be written in natural language and be as basic or detailed as required.  Examples include:
* Woodland on a sunny summer day in the shade of the trees.
* My birthday party for me and my friends.
* A romantic moodlit evening with my partner.
* Film night with an ocean theme.
* Working from home and I need to concentrate.
* Relaxed lighting with purple colours.

When a response is received from Open AI the application will log:
* The scene response JSON object as generated by the AI.
* The AI generated scene name and description.
* The colours allocated to each light.

It will also offer the option to create another scene.

```
    # Previous output removed for brevity.
Situation: Autumn
    # Output removed for brevity.
* Scene Result *
Scene: Autumn Glow
Description: This scene is designed to evoke the cozy and warm atmosphere of autumn, with colors reminiscent of falling leaves and golden sunlight filtering through trees.
Lights:
- Hallway: Golden Orange
- Living Room: Soft Peach
- Kitchen: Rust Brown
- Dining Room: Warm Yellow
* Press Y to create another scene... *
```